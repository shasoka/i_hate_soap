{% extends "base.html" %}

{% block content %}

<h1 id="topHeader">–í—Ö–æ–¥</h1>

<form id="loginForm" action="/login" method="post">
    <label for="username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
    <input type="text" name="username" id="username" required>

    <label for="password">–ü–∞—Ä–æ–ª—å:</label>
    <input type="password" name="password" id="password" required>

    <button type="submit">–í–æ–π—Ç–∏</button>
</form>

<p id="suggest">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="/register">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>

{% if soap_body %}
    <h2>SOAP Request üë§</h2>
    <pre><code id="soapRequest"
               class="language-xml">{{ soap_body | e | trim }}</code></pre>
{% endif %}

{% if soap_response %}
{% if success == True %}
        <h2>SOAP Response üü¢</h2>
        <!-- –°–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –¥–∞–ª–µ–µ -->
        <script>
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('topHeader').style.display = 'none';
            document.getElementById('suggest').style.display = 'none';
        </script>
{% else %}
        <h2>SOAP Response üî¥</h2>
{% endif %}
    <pre><code id="soapResponse"
               class="language-xml">{{ soap_response | e }}</code></pre>
{% endif %}

{% if soap_response %}
{% if success == True %}
	<div id="buttonContainer">
        <button class="redButton" id="logoutButton"
                onclick="logoutUser()">–í—ã—Ö–æ–¥ üö™</button>
		<button class="greenButton" id="nextButton"
		        onclick="window.location.href='/files'">–ü—Ä–∏–Ω—è—Ç–æ ü´°</button>
	</div>

{% endif %}
{% endif %}

<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script>
    function logoutUser() {
	    document.cookie = 'access_token=; Max-Age=0';
	    document.cookie = 'token_type=; Max-Age=0';
	    window.location.href = '/login';
    }
</script>

{% endblock %}
