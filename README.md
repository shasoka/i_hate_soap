## üßº –ú—ã–ª–æ, mtom/xop –∏ –ø—Ä–æ—á–∏–µ —Ä–∞–¥–æ—Å—Ç–∏ –∂–∏–∑–Ω–∏

![nu_prosto_k_slovu](readme_imgs/img.png)

---

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å?

> [!WARNING]
> –≠—Ç–æ —á—É–¥–æ –ø–∏—Å–∞–ª–æ—Å—å –Ω–∞ `Python 3.10`. –ó–∞–≤–µ–¥–µ—Ç—Å—è –ª–∏ –Ω–∞ —á–µ–º-—Ç–æ –º–æ–ª–æ–∂–µ? - –Ω–µ –∑–Ω–∞—é.

1. –ö–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–±—â–∏–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º
2. –í —Ñ–∞–π–ª–∞—Ö `.env`, `.\server\core\config.py` –∏ `.\client\config.py` —É–∫–∞–∑–∞–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –º–æ–∂–Ω–æ (–∏ –Ω—É–∂–Ω–æ) –∏–≥—Ä–∞—Ç—å—Å—è
3. –§–∞–π–ª `.\scripts\sql\tables.sql` –≥–æ–≤–æ—Ä–∏—Ç —Å–∞–º –∑–∞ —Å–µ–±—è
4. –û—Ç–∫—Ä—ã—Ç—ã–π –∏ –∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á–∏ –ø–æ–ª—É—á–∞–µ–º –ø—Ä–∏ –ø–æ–º–æ—â–∏ `openssl`:
    - –ó–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á:
        ```shell
        openssl genrsa -out .\certs\jwt_private.pem 2048
        ```
    - –û—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—é—á:
        ```shell
        openssl rsa -in .\certs\jwt_private.pem -outform PEM -pubout -out .\certs\jwt_public.pem
        ```
5. –°–æ–∑–¥–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ `python -m venv venv`
6. –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –µ–≥–æ `.\venv\Scripts\activate`

> [!IMPORTANT]
> –î–∞–ª–µ–µ –º–∞–≥–∏—è ü™Ñ: –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∂–∏–≤–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –ø–æ–¥–Ω—è—Ç–∏—è SOAP-—Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ `Python` - —ç—Ç–æ [Spyne](http://spyne.io/#inprot=HttpRpc&outprot=JsonDocument&s=rpc&tpt=WsgiApplication&validator=true).
> –ù–æ! –û–Ω–æ –æ—á–µ–Ω—å –ø–ª–æ—Ö–æ —É–º–µ–µ—Ç –≤ `MTOM`. –ü–æ—ç—Ç–æ–º—É –ø—Ä–∏—à–ª–æ—Å—å –ø–æ–∫–æ–≤—ã—Ä—è—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫–∏, –∏ –∑–∞—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ —Ä–∞–±–æ—Ç–∞—Ç—å.

7. –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –º–æ–µ–≥–æ —Ñ–æ—Ä–∫–∞ `Spyne`: `cd .\venv\Lib\site-packages\ && mkdir spyne`
8. –ù–∞—Ö–æ–¥—è—Å—å –≤ –Ω–æ–≤–æ–∏—Å–ø–µ—á–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: `git clone https://github.com/shasoka/spyne -b fixing-mtom-xop .`
9. –ë–∏–ª–¥–∏–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É: `python setup.py install`
10. –ü–æ–∑–¥—Ä–∞–≤–ª—è—é ü§ù –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install -r .\requirements.txt`
11. –ù—É, –≤—Å–µ, –ø–æ–±–µ–¥–∞!
    - –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞: `python .\server\main.py`
    - –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞: `python .\client\main.py`

### –ß—Ç–æ-—Ç–æ –ø—Ä–æ –∞–ø—Ç–∞–π–º

–§–æ—Ä–º—É–ª–∞ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞:

```math
\text{uptime\_percentage} = \frac{\sum (t_{\text{death\_i}} - t_{\text{start\_i}}) + (t_{\text{now}} - t_{\text{start\_n}})}{t_{\text{now}} - t_{\text{start\_0}}}
```

### –ò –µ—â–µ

–ö–æ–º—É –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ `pull request` –≤ `Spyne` [—Ç—É—Ç](https://github.com/arskom/spyne/pull/716)
